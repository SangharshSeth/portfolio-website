---
title: 'Leveraging full power of docker for development'
publishedAt: '2024-04-07'
summary: 'How to get over saying "It works on my machine!"'
---

How to get over saying "It works on my machine

## Create a Dockerfile
```bash
FROM node:alpine
WORKDIR /app

# Enable corepack for pnpm support
RUN corepack enable

# Copy lockfile and package.json for dependencies installation
COPY pnpm-lock.yaml package.json ./

# Install dependencies using pnpm
RUN pnpm install

# Copy the rest of the application code
COPY --chown=node:node . .

# Run the application as a non-root user for security
USER node

# Expose the port that the application will run on
EXPOSE 3000

# Start the application with live reload
CMD ["pnpm", "run", "start:dev"]


## Now Create a docker-compose file with all our dependencies like database and queues
```bash
services:
  mysql:
    image: mysql
    container_name: mysql-nestjs
    ports:
      - 3306:3306
    environment:
      - MYSQL_ROOT_PASSWORD=root
      - MYSQL_DATABASE=development
    volumes:
      - mysql_data:/var/lib/mysql
  
  nestjs-app:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: nestjs-api-service
    environment:
      - DB_HOST=mysql
      - DB_PORT=3306
      - DB_USERNAME=root
      - DB_PASSWORD=root
      - DB_DATABASE=development
    ports:
      - 3000:3000
    depends_on:
      - mysql
    volumes:
      - .:/app
      - /app/node_modules

volumes:
  mysql_data:
  ```
